/**
 * @author : Jo Yun Ki (wddoddo@gmail.com)
 * @version : 1.1
 * @since : 2012.04.12
 * 
 * ex)
 * 		[option]	
 * 		margin - "left", "right", "top", "bottom", "none"
 * 		width - div width
 * 		height - div height
 * 		delay - 1/1000 sec
 * 		ease - "easeOutQuart", "easeInQuart", "easeInOutQuart" ..
 * 
 * 		[ex]
 *		var banner = new WBanner($('#eventContentDiv')[0], 300, {margin:"none", width:400, height:500, delay:2500});
 *		banner.add("event1.html");
 *		banner.add("../img/event2.jpg", "http://www.naver.com");
 *		banner.start();
 *	
 *		- 버튼이 추가시 속성들
 *		banner.change(n); - 배너를 n번째로 변경 가능
 *		banner.startTimer(); - 딜레이 타이머 시작
 *		banner.stopTimer(); - 딜레이 타이머 정지
 *		banner.getActivate() - 현제 활성화 반환
 *	
 *		$('#eventContentDiv').bind('slide', function(){'배너 변경될때 실행될 명령'});
 */

WBanner=function(k,e,i){dataArr=[];var p=dataArr;var d=$(k);var e=e;margin=i.margin;var c=i.width;var m=i.height;var j=i.delay;var f=i.ease;delete (i);if(margin==undefined){margin="none"}if(c==undefined){c=parseInt(d.css("width"))}if(m==undefined){m=parseInt(d.css("height"))}if(j==undefined){j=5000}if(f==undefined){f="easeOutQuart"}var a;activate=0;var h;init=function(){l();g();startTimer()};function l(){d.empty();for(var r=0;r<p.length;r++){var q=p[r].url;var t=p[r].link;var s=q.substr(q.lastIndexOf(".")+1);if(s=="jpg"||s=="gif"||s=="png"){var u=$("<div><a href="+t+"><img src="+q+" width="+c+" height="+m+" alt=Image"+r+" /></div>").appendTo(d)}else{u=$('<div><iframe frameborder=0 scrolling="no"></iframe></div>').appendTo(d);u.children().attr({width:c,height:m,allowtransparency:"true",src:q})}u.css({position:"absolute",width:c,height:m,display:"none",opacity:"0"})}a=d.children();if(a.length!=0){a.eq(0).css({display:"block",opacity:"1"})}}function g(){d.bind("mouseenter",function(){stopTimer()});d.bind("mouseleave",function(){startTimer()})}startTimer=function(){stopTimer();if(a.length>1){h=setInterval(b,j)}};stopTimer=function(){clearInterval(h)};function b(){var q=activate+1;n(q);d.trigger("slide")}function n(r){if(margin!="none"){var w=o(margin).param;var q=o(margin).position;var x=o(margin).direct;var v=parseInt(a.css(w));var u={};u[q]=v*x;a.eq(activate).stop(true,true);a.eq(activate).css({display:"block",opacity:"1"}).animate(u,{queue:false,duration:e,ease:f})}activate=r;if(activate>=a.length){activate=0}var t={};t.display="block";if(margin!="none"){t.opacity="1";t[q]=v*(x*-1)}a.eq(activate).stop(true,true);a.eq(activate).css(t).animate({opacity:"1",left:"0px",top:"0px"},{queue:false,duration:e,ease:f,complete:s}).appendTo(d);function s(){a.each(function(y){if(y!=activate){a.eq(y).css({display:"none",opacity:"0",left:"0",top:"0"})}})}delete (fromObj);delete (t)}function o(r){var q={};if(r=="left"||r=="right"){q.param="width"}if(r=="top"||r=="bottom"){q.param="height"}if(r=="left"||r=="right"){q.position="left"}if(r=="top"||r=="bottom"){q.position="top"}if(r=="left"||r=="top"){q.direct=-1}if(r=="right"||r=="bottom"){q.direct=1}return q}trace=function(q){$("#trace").append(q+", ")};setChange=function(q){if(activate!=q&&q<p.length){if(o(margin).position=="left"){if(activate<q){margin="left"}if(activate>q){margin="right"}}else{if(o(margin).position=="top"){if(activate<q){margin="top"}if(activate>q){margin="bottom"}}}n(q)}}};WddoBanner.prototype.add=function(a,b){dataArr.push({url:a,link:(b==undefined)?"#":b})};WddoBanner.prototype.start=function(){init()};WddoBanner.prototype.change=function(a){setChange(a)};WddoBanner.prototype.startTimer=function(){startTimer()};WddoBanner.prototype.stopTimer=function(){stopTimer()};WddoBanner.prototype.getActivate=function(){return activate};